<%- include('partials/header', { title: 'Add Payment Method' }) %>

<body data-stripe-key="<%= stripePublicKey %>">
  <div class="container">
    <h1>Add Payment Method</h1>

    <!-- If the user is not logged in -->
    <div id="login-prompt">
      <h2>Please log in to continue</h2>
      <p>You must be logged in to add a card.</p>
      <button id="show-login-btn">Log In</button>
    </div>

    <!-- If the user is authenticated -->
    <div id="add-card-content" class="hidden">
      <div id="payment-element">
        <!-- Stripe will mount the form here -->
      </div>

      <div id="default-card-option">
        <input type="checkbox" id="default-card-checkbox" />
        <label for="default-card-checkbox">Set as default payment method</label>
      </div>

      <button id="add-card-btn">Add Card</button>
    </div>

    <!-- UI feedback -->
    <div id="spinner" class="spinner hidden"></div>
    <p id="error-message" class="error-message hidden"></p>
  </div>

  <%- include('partials/login-modal') %>
  <script src="https://js.stripe.com/v3/"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/add-payment-method.js"></script>
</body>
</html>
